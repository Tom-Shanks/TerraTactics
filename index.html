<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Generate contour maps for tabletop gaming from real-world terrain data" />
    <title>Tabletop Terrain Map Generator</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin="anonymous" />
    
    <!-- Leaflet Draw CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css"
          crossorigin="anonymous" />
    
    <style>
      html, body, #root {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
      }
      
      .leaflet-container {
        height: 100%;
        width: 100%;
        position: relative;
        z-index: 10;
      }
      
      /* Force visibility of map and controls */
      .leaflet-map-pane,
      .leaflet-tile,
      .leaflet-marker-icon,
      .leaflet-marker-shadow,
      .leaflet-tile-pane,
      .leaflet-overlay-pane,
      .leaflet-shadow-pane,
      .leaflet-marker-pane,
      .leaflet-popup-pane,
      .leaflet-control-layers,
      .leaflet-draw-toolbar,
      .leaflet-draw-actions {
        visibility: visible !important;
        display: block !important;
      }
      
      /* Ensure draw toolbar is visible */
      .leaflet-draw.leaflet-control {
        z-index: 1000 !important;
        margin-top: 10px !important;
        margin-left: 10px !important;
      }
      
      /* Fix control positioning */
      .leaflet-top, .leaflet-bottom {
        z-index: 1000 !important;
        position: absolute !important;
      }
      
      .leaflet-top.leaflet-left {
        top: 10px !important;
        left: 10px !important;
      }
    </style>
    
    <!-- Leaflet Scripts (load before React) -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin="anonymous"></script>
    
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"
            crossorigin="anonymous"></script>
            
    <!-- Fix Leaflet's icon paths -->
    <script>
      // Force icon paths to be correct
      window.addEventListener('DOMContentLoaded', function() {
        if (window.L) {
          console.log("Setting Leaflet icon paths");
          L.Icon.Default.mergeOptions({
            iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',
            iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',
            shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
          });
        } else {
          console.error("Leaflet is not loaded!");
        }
      });
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
